// Package i18n provides internationalization support for git-multirepo
package i18n

import "fmt"

var currentLang = "en"

var messages = map[string]map[string]string{
	"en": {
		// Pull command
		"uncommitted_files":   "%d uncommitted file(s)",
		"clean_directory":     "Clean",
		"pull_confirm":        "Pull? (Y/n): ",
		"pull_updated":        "âœ“ Updated (%d file(s) changed)",
		"pull_already_uptodate": "âœ“ Already up to date",
		"pull_failed":         "âœ— Failed",
		"pull_skipped":        "â†’ Skipped",
		"run_status":          "â†’ Run: git multirepo status %s",
		"not_git_repo":        "â†’ Not a git repository, skipping",
		"failed_get_branch":   "âœ— Failed to get branch: %v",
		"failed_read_input":   "âœ— Failed to read input: %v",
		"no_subs_registered":  "No repositories registered",
		"sub_not_found":       "repository not found: %s",

		// Status command
		"local_status":        "Local Status:",
		"files_modified":      "âœ— %d file(s) modified:",
		"files_untracked":     "âš  %d file(s) untracked:",
		"files_staged":        "â— %d file(s) staged:",
		"clean_working_tree":  "âœ“ Clean working tree",
		"remote_status":       "Remote Status:",
		"commits_behind":      "â†’ %d commit(s) behind origin/%s",
		"commits_ahead":       "â†’ %d commit(s) ahead (unpushed)",
		"up_to_date":          "âœ“ Up to date with origin",
		"cannot_fetch":        "âš  Cannot fetch from remote",
		"skip_files":          "Skip Files:",
		"skip_file_changed":   "âš  %s changed in remote",
		"skip_remote_added":   "Remote added new lines",
		"skip_remote_removed": "Remote removed lines",
		"skip_remote_modified": "Remote modified content",
		"skip_file_protected": "(Your local file is protected by skip-worktree)",
		"no_remote_changes":   "âœ“ No remote changes in skip files",
		"how_to_resolve":      "How to resolve:",
		"no_action_needed":    "âœ“ No action needed",
		"not_cloned":          "(not cloned)",
		"resolve_commit":      "1. Commit or stash changes:",
		"resolve_or_gitignore": "# Or add untracked files to .gitignore",
		"resolve_pull":        "2. Pull updates:",
		"resolve_push":        "3. Push commits:",
		"resolve_skip":        "4. (Optional) Update skip files:",
		"resolve_review":      "# Review and merge changes",

		// Integrity check
		"integrity_check":             "Multirepo Integrity Check",
		"integrity_all_clean":         "âœ“ All integrity checks passed",
		"no_nested_manifests":         "âœ“ No nested manifests found",
		"no_parent_manifest":          "âœ“ No parent manifest detected",
		"all_workspaces_registered":   "âœ“ All workspaces registered",
		"nested_manifest_critical":    "ğŸš¨ CRITICAL: Nested manifest detected!",
		"nested_manifest_path":        "    - %s",
		"nested_manifest_explanation": "  This is invalid. A workspace cannot have its own manifest.",
		"nested_manifest_fix":         "  Remove the nested manifest:",
		"nested_manifest_cmd":         "    rm %s",
		"parent_manifest_warning":     "âš  WARNING: Parent manifest detected!",
		"parent_manifest_path":        "  This directory is part of a parent multirepo at: %s",
		"parent_manifest_explanation": "  Working here may affect the parent repository.",
		"unregistered_workspace_warning": "âš  Found %d unregistered workspace(s):",
		"unregistered_workspace_item": "    - %s (not in manifest)",
		"unregistered_workspace_fix":  "  How to fix:",
		"unregistered_workspace_cmd":  "    git multirepo sync",
		"remote_url_mismatch":         "âš  Remote URL mismatch:",
		"remote_url_workspace":        "    Workspace: %s",
		"remote_url_expected":         "    Expected:  %s",
		"remote_url_actual":           "    Actual:    %s",

		// Sync command
		"syncing":              "Syncing configuration...",
		"installing_hooks":     "â†’ Installing git hooks",
		"hooks_installed":      "âœ“ Installed",
		"hooks_failed":         "âœ— Failed: %v",
		"no_gitsubs_found":     "\nâ†’ No .git.multirepos found. Scanning for existing repositories...",
		"no_subs_found":        "âœ“ No repositories found",
		"to_add_sub":           "\nTo add a repository, use:",
		"cmd_git_sub_clone":    "  git multirepo clone <url> <path>",
		"created_gitsubs":      "\nâœ“ Created .git.multirepos with %d repository(s)",
		"applying_ignore":      "\nâ†’ Applying ignore patterns",
		"applied_patterns":     "âœ“ Applied %d patterns",
		"applying_skip_mother": "â†’ Applying skip-worktree to mother repo",
		"applied_files":        "âœ“ Applied to %d files",
		"processing_mother_keep": "â†’ Processing mother repo keep files",
		"no_subclones":         "\nNo repositories registered.",
		"processing_subclones": "\nâ†’ Processing repositories:",
		"initializing_git":     "â†’ Initializing .git (source files already present)",
		"failed_initialize":    "âœ— Failed to initialize: %v",
		"failed_update_gitignore": "âš  Failed to update .gitignore: %v",
		"initialized_git":      "âœ“ Initialized .git directory",
		"cloning_from":         "â†’ Cloning from %s",
		"failed_create_dir":    "âœ— Failed to create directory: %v",
		"clone_failed":         "âœ— Clone failed: %v",
		"not_found_cloning":    "â†’ Repository not found, cloning...",
		"cloned":               "âœ“ Cloned",
		"cloned_successfully":  "âœ“ Cloned successfully",
		"has_unpushed":         "âš  Has unpushed commits (%s)",
		"push_first":           "Push first: cd %s && git push",
		"updated_commit":       "âœ“ Updated commit: %s â†’ %s",
		"adding_to_gitignore":  "â†’ Adding to .gitignore",
		"added_to_gitignore":   "âœ“ Added",
		"applying_skip_sub":    "â†’ Applying skip-worktree (%d files)",
		"skip_applied":         "âœ“ Applied",
		"no_skip_config":       "âœ“ No skip-worktree config",
		"processing_keep_files": "â†’ Processing keep files (%d files)",
		"no_keep_files_clean":  "    âœ“ No keep files - clean workspace",
		"installing_hook":      "â†’ Installing post-commit hook",
		"hook_installed":       "âœ“ Hook installed",
		"hook_failed":          "âš  Failed to install hook: %v",
		"completed_issues":     "âš  Completed with %d issue(s)",
		"all_success":          "âœ“ All configurations applied successfully",
		"found_sub":            "Found repository: %s",
		"warn_no_remote":       "No remote configured for %s (local-only repository)",
		"failed_get_remote":    "âš  %s: failed to get remote URL: %v",
		"failed_get_commit":     "âš  %s: failed to get commit: %v",
		"failed_scan":           "failed to scan directories: %w",
		"install_hook_usage":    "Install git hook for automatic sync after checkout",
		"uninstall_hook_usage":  "Remove git hook for automatic sync",
		"hook_added":            "Git hook installed successfully",
		"hook_removed":          "Git hook removed successfully",
		"hook_restored":         "Previous hook restored from backup: %s",
		"hook_not_installed":    "Git hook is not installed",
		"hook_already_installed": "Git hook is already installed",
		"removing_hooks":        "â†’ Removing git hooks",
		"hook_backup_warning":   "Existing post-checkout hook backed up to: %s",
		"hook_howto":            "Run 'git multirepo install-hook' to enable automatic sync",
	},
	"ko": {
		// Pull command
		"uncommitted_files":   "ì‘ì—… ë””ë ‰í† ë¦¬ %dê°œ íŒŒì¼ ìˆ˜ì •ë¨",
		"clean_directory":     "ì‘ì—… ë””ë ‰í† ë¦¬ ê¹¨ë—í•¨",
		"pull_confirm":        "Pull í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (Y/n): ",
		"pull_updated":        "âœ“ ì—…ë°ì´íŠ¸ë¨ (%dê°œ íŒŒì¼ ë³€ê²½ë¨)",
		"pull_already_uptodate": "âœ“ ì´ë¯¸ ìµœì‹  ìƒíƒœ",
		"pull_failed":         "âœ— ì‹¤íŒ¨",
		"pull_skipped":        "â†’ ê±´ë„ˆëœ€",
		"run_status":          "â†’ ì‹¤í–‰: git multirepo status %s",
		"not_git_repo":        "â†’ git ì €ì¥ì†Œê°€ ì•„ë‹˜, ê±´ë„ˆëœ€",
		"failed_get_branch":   "âœ— ë¸Œëœì¹˜ í™•ì¸ ì‹¤íŒ¨: %v",
		"failed_read_input":   "âœ— ì…ë ¥ ì½ê¸° ì‹¤íŒ¨: %v",
		"no_subs_registered":  "ë“±ë¡ëœ repositoryê°€ ì—†ìŠµë‹ˆë‹¤",
		"sub_not_found":       "repositoryë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ: %s",

		// Status command
		"local_status":        "ë¡œì»¬ ìƒíƒœ:",
		"files_modified":      "âœ— %dê°œ íŒŒì¼ ìˆ˜ì •ë¨:",
		"files_untracked":     "âš  %dê°œ íŒŒì¼ ì¶”ì  ì•ˆ ë¨:",
		"files_staged":        "â— %dê°œ íŒŒì¼ ìŠ¤í…Œì´ì§•ë¨:",
		"clean_working_tree":  "âœ“ ì‘ì—… íŠ¸ë¦¬ ê¹¨ë—í•¨",
		"remote_status":       "ì›ê²© ìƒíƒœ:",
		"commits_behind":      "â†’ origin/%së³´ë‹¤ %dê°œ ì»¤ë°‹ ë’¤ì²˜ì§",
		"commits_ahead":       "â†’ %dê°œ ì»¤ë°‹ ì•ì„¬ (í‘¸ì‹œ ì•ˆ ë¨)",
		"up_to_date":          "âœ“ originê³¼ ìµœì‹  ìƒíƒœ",
		"cannot_fetch":        "âš  ì›ê²©ì—ì„œ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŒ",
		"skip_files":          "Skip íŒŒì¼:",
		"skip_file_changed":   "âš  %s ì›ê²©ì—ì„œ ë³€ê²½ë¨",
		"skip_remote_added":   "ì›ê²©ì—ì„œ ìƒˆ ì¤„ ì¶”ê°€ë¨",
		"skip_remote_removed": "ì›ê²©ì—ì„œ ì¤„ ì‚­ì œë¨",
		"skip_remote_modified": "ì›ê²©ì—ì„œ ë‚´ìš© ìˆ˜ì •ë¨",
		"skip_file_protected": "(ë¡œì»¬ íŒŒì¼ì€ skip-worktreeë¡œ ë³´í˜¸ë¨)",
		"no_remote_changes":   "âœ“ skip íŒŒì¼ì— ì›ê²© ë³€ê²½ì‚¬í•­ ì—†ìŒ",
		"how_to_resolve":      "í•´ê²° ë°©ë²•:",
		"no_action_needed":    "âœ“ ì¡°ì¹˜ í•„ìš” ì—†ìŒ",
		"not_cloned":          "(ë³µì œë˜ì§€ ì•ŠìŒ)",
		"resolve_commit":      "1. ë³€ê²½ì‚¬í•­ ì»¤ë°‹ ë˜ëŠ” stash:",
		"resolve_or_gitignore": "# ë˜ëŠ” ì¶”ì  ì•ˆ ëœ íŒŒì¼ì„ .gitignoreì— ì¶”ê°€",
		"resolve_pull":        "2. ì—…ë°ì´íŠ¸ ë°›ê¸°:",
		"resolve_push":        "3. ì»¤ë°‹ í‘¸ì‹œ:",
		"resolve_skip":        "4. (ì„ íƒ) skip íŒŒì¼ ì—…ë°ì´íŠ¸:",
		"resolve_review":      "# ë³€ê²½ì‚¬í•­ ê²€í†  ë° ë³‘í•©",

		// Integrity check
		"integrity_check":             "Multirepo êµ¬ì¡° ë¬´ê²°ì„± ê²€ì‚¬",
		"integrity_all_clean":         "âœ“ ëª¨ë“  ë¬´ê²°ì„± ê²€ì‚¬ í†µê³¼",
		"no_nested_manifests":         "âœ“ ì¤‘ì²©ëœ manifest ì—†ìŒ",
		"no_parent_manifest":          "âœ“ ë¶€ëª¨ manifest ì—†ìŒ",
		"all_workspaces_registered":   "âœ“ ëª¨ë“  workspace ë“±ë¡ë¨",
		"nested_manifest_critical":    "ğŸš¨ ì‹¬ê°: ì¤‘ì²©ëœ manifest ë°œê²¬!",
		"nested_manifest_path":        "    - %s",
		"nested_manifest_explanation": "  ì´ê²ƒì€ ì˜ëª»ëœ êµ¬ì¡°ì…ë‹ˆë‹¤. WorkspaceëŠ” ìì²´ manifestë¥¼ ê°€ì§ˆ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.",
		"nested_manifest_fix":         "  ì¤‘ì²©ëœ manifest ì œê±°:",
		"nested_manifest_cmd":         "    rm %s",
		"parent_manifest_warning":     "âš  ê²½ê³ : ë¶€ëª¨ manifest ê°ì§€!",
		"parent_manifest_path":        "  ì´ ë””ë ‰í† ë¦¬ëŠ” ë‹¤ìŒ ë¶€ëª¨ multirepoì˜ ì¼ë¶€ì…ë‹ˆë‹¤: %s",
		"parent_manifest_explanation": "  ì´ ìœ„ì¹˜ì—ì„œ ì‘ì—…í•˜ë©´ ë¶€ëª¨ repositoryì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
		"unregistered_workspace_warning": "âš  %dê°œì˜ ë¯¸ë“±ë¡ workspace ë°œê²¬:",
		"unregistered_workspace_item": "    - %s (manifestì— ì—†ìŒ)",
		"unregistered_workspace_fix":  "  ìˆ˜ì • ë°©ë²•:",
		"unregistered_workspace_cmd":  "    git multirepo sync",
		"remote_url_mismatch":         "âš  Remote URL ë¶ˆì¼ì¹˜:",
		"remote_url_workspace":        "    Workspace: %s",
		"remote_url_expected":         "    ì˜ˆìƒ:      %s",
		"remote_url_actual":           "    ì‹¤ì œ:      %s",

		// Sync command
		"syncing":              "ë™ê¸°í™” ì¤‘...",
		"installing_hooks":     "â†’ git í›… ì„¤ì¹˜ ì¤‘",
		"hooks_installed":      "âœ“ ì„¤ì¹˜ë¨",
		"hooks_failed":         "âœ— ì‹¤íŒ¨: %v",
		"no_gitsubs_found":     "\nâ†’ .git.multireposë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ. ê¸°ì¡´ repository ê²€ìƒ‰ ì¤‘...",
		"no_subs_found":        "âœ“ repositoryë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤",
		"to_add_sub":           "\nrepositoryë¥¼ ì¶”ê°€í•˜ë ¤ë©´:",
		"cmd_git_sub_clone":    "  git multirepo clone <url> <path>",
		"created_gitsubs":      "\nâœ“ %dê°œ repositoryë¡œ .git.multirepos ìƒì„±ë¨",
		"applying_ignore":      "\nâ†’ ignore íŒ¨í„´ ì ìš© ì¤‘",
		"applied_patterns":     "âœ“ %dê°œ íŒ¨í„´ ì ìš©ë¨",
		"applying_skip_mother": "â†’ ë©”ì¸ ì €ì¥ì†Œì— skip-worktree ì ìš© ì¤‘",
		"applied_files":        "âœ“ %dê°œ íŒŒì¼ì— ì ìš©ë¨",
		"processing_mother_keep": "â†’ ë©”ì¸ ì €ì¥ì†Œ keep íŒŒì¼ ì²˜ë¦¬ ì¤‘",
		"no_subclones":         "\në“±ë¡ëœ repositoryê°€ ì—†ìŠµë‹ˆë‹¤.",
		"processing_subclones": "\nâ†’ repository ì²˜ë¦¬ ì¤‘:",
		"initializing_git":     "â†’ .git ì´ˆê¸°í™” ì¤‘ (ì†ŒìŠ¤ íŒŒì¼ ì´ë¯¸ ì¡´ì¬)",
		"failed_initialize":    "âœ— ì´ˆê¸°í™” ì‹¤íŒ¨: %v",
		"failed_update_gitignore": "âš  .gitignore ì—…ë°ì´íŠ¸ ì‹¤íŒ¨: %v",
		"initialized_git":      "âœ“ .git ë””ë ‰í† ë¦¬ ì´ˆê¸°í™”ë¨",
		"cloning_from":         "â†’ %sì—ì„œ ë³µì œ ì¤‘",
		"failed_create_dir":    "âœ— ë””ë ‰í† ë¦¬ ìƒì„± ì‹¤íŒ¨: %v",
		"clone_failed":         "âœ— ë³µì œ ì‹¤íŒ¨: %v",
		"not_found_cloning":    "â†’ Repositoryë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ, ë³µì œ ì¤‘...",
		"cloned":               "âœ“ ë³µì œë¨",
		"cloned_successfully":  "âœ“ ë³µì œ ì„±ê³µ",
		"has_unpushed":         "âš  í‘¸ì‹œ ì•ˆ ëœ ì»¤ë°‹ ìˆìŒ (%s)",
		"push_first":           "ë¨¼ì € í‘¸ì‹œ: cd %s && git push",
		"updated_commit":       "âœ“ ì»¤ë°‹ ì—…ë°ì´íŠ¸ë¨: %s â†’ %s",
		"adding_to_gitignore":  "â†’ .gitignoreì— ì¶”ê°€ ì¤‘",
		"added_to_gitignore":   "âœ“ ì¶”ê°€ë¨",
		"applying_skip_sub":    "â†’ skip-worktree ì ìš© ì¤‘ (%dê°œ íŒŒì¼)",
		"skip_applied":         "âœ“ ì ìš©ë¨",
		"no_skip_config":       "âœ“ skip-worktree ì„¤ì • ì—†ìŒ",
		"processing_keep_files": "â†’ keep íŒŒì¼ ì²˜ë¦¬ ì¤‘ (%dê°œ íŒŒì¼)",
		"no_keep_files_clean":  "    âœ“ keep íŒŒì¼ ì—†ìŒ - ê¹¨ë—í•œ workspace",
		"installing_hook":      "â†’ post-commit í›… ì„¤ì¹˜ ì¤‘",
		"hook_installed":       "âœ“ í›… ì„¤ì¹˜ë¨",
		"hook_failed":          "âš  í›… ì„¤ì¹˜ ì‹¤íŒ¨: %v",
		"completed_issues":     "âš  %dê°œ ë¬¸ì œì™€ í•¨ê»˜ ì™„ë£Œë¨",
		"all_success":          "âœ“ ëª¨ë“  ì„¤ì •ì´ ì„±ê³µì ìœ¼ë¡œ ì ìš©ë¨",
		"found_sub":            "Repository ë°œê²¬: %s",
		"warn_no_remote":       "%sì— ì›ê²© ì €ì¥ì†Œê°€ ì„¤ì •ë˜ì§€ ì•ŠìŒ (ë¡œì»¬ ì „ìš© repository)",
		"failed_get_remote":      "âš  %s: ì›ê²© URL ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨: %v",
		"failed_get_commit":      "âš  %s: ì»¤ë°‹ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨: %v",
		"failed_scan":            "ë””ë ‰í† ë¦¬ ìŠ¤ìº” ì‹¤íŒ¨: %w",
		"install_hook_usage":     "checkout í›„ ìë™ ë™ê¸°í™”ë¥¼ ìœ„í•œ git hook ì„¤ì¹˜",
		"uninstall_hook_usage":   "ìë™ ë™ê¸°í™” git hook ì œê±°",
		"hook_added":             "Git hook ì„¤ì¹˜ ì„±ê³µ",
		"hook_removed":           "Git hook ì œê±° ì„±ê³µ",
		"hook_restored":          "ë°±ì—…ì—ì„œ ì´ì „ hook ë³µì›ë¨: %s",
		"hook_not_installed":     "Git hookì´ ì„¤ì¹˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤",
		"hook_already_installed": "Git hookì´ ì´ë¯¸ ì„¤ì¹˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤",
		"removing_hooks":         "â†’ git í›… ì œê±° ì¤‘",
		"hook_backup_warning":    "ê¸°ì¡´ post-checkout hook ë°±ì—…ë¨: %s",
		"hook_howto":             "'git multirepo install-hook' ëª…ë ¹ìœ¼ë¡œ ìë™ ë™ê¸°í™”ë¥¼ í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤",
	},
}

// SetLanguage sets the current language for messages

// SetLanguage sets the current language for messages
func SetLanguage(lang string) {
	if lang == "ko" || lang == "en" {
		currentLang = lang
	}
}

// T translates a message key to the current language
func T(key string, args ...interface{}) string {
	msg, ok := messages[currentLang][key]
	if !ok {
		// Fallback to key if not found
		return key
	}

	if len(args) > 0 {
		return fmt.Sprintf(msg, args...)
	}
	return msg
}
